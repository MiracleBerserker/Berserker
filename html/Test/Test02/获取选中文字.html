<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>获取选中文字</title>
    <style>
        #test {
            width: 500px;
            height: 500px;
            margin: 100px auto;
        }
        #select {
            position: absolute;
            background-color: pink;
            left: 0;
            top: 0;
            width: 100px;
            height: 100px;
            display: none;
        }
    </style>
</head>
<body>
<span id="select"></span>
<div id="test">我要复制的文字我要复制的文字我要复制的文字我要复制的文字我要复制的文字我要复制的文字我要复制的文字我要复制的文字我要复制的文字我要复制的文字我要复制的文字我要复制的文字我要复制的文字我要复制的文字我要复制的文字我要复制的文字我要复制的文字我要复制的文字我要复制的文字我要复制的文字</div>
</body>
<script>

    function getText() {
        if(window.getSelection){
            return window.getSelection().toString();
        }else{
            return document.selection.createRange().text;
        }
    }
    function showBox(left,top,contents) {
              box.style.left=left+"px";
              box.style.top=top+"px";
              box.innerHTML=contents;
              box.style.display="block";
    }
    var box=document.getElementById("select");
    document.getElementById("test").onmouseup=function (event) {
            event=event||window.event;
            var txt=getText();
            if(txt!=""){
                showBox(event.clientX,event.clientY,txt);
            }
    };
    document.onmousedown=function (event) {
        event=event||window.event;
        var targetid=event.target?event.target.id:event.srcElement.id;
        if(targetid!="select"){
            box.style.display="none";
        }

    }
</script>
</html>